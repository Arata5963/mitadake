<%# app/views/posts/ranking.html.erb %>
<%# „Ç¢„ÇØ„Ç∑„Éß„É≥Êï∞„É©„É≥„Ç≠„É≥„Ç∞‰∏ÄË¶ß„Éö„Éº„Ç∏ÔºàYouTube MusicÈ¢®„É™„Çπ„ÉàË°®Á§∫Ôºâ %>

<div class="min-h-screen bg-white">
  <div class="max-w-4xl mx-auto px-4 sm:px-8 py-6">
    <%# „Éò„ÉÉ„ÉÄ„Éº %>
    <div class="flex items-center gap-4 mb-6">
      <%= link_to posts_path, class: "text-gray-400 hover:text-gray-600 transition-colors" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      <% end %>
      <h1 class="text-xl font-bold text-gray-900">„Ç¢„ÇØ„Ç∑„Éß„É≥Êï∞„É©„É≥„Ç≠„É≥„Ç∞</h1>
      <span class="text-sm text-gray-500">„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅåÂ§ö„ÅÑÊäïÁ®ø</span>
    </div>

    <% if @posts.present? %>
      <div class="space-y-3">
        <% @posts.each_with_index do |post, index| %>
          <% rank = (params[:page].to_i > 1 ? (params[:page].to_i - 1) * 20 : 0) + index + 1 %>
          <div class="flex items-center gap-4 group">
            <%# Â§ß„Åç„Å™„É©„É≥„Ç≠„É≥„Ç∞Áï™Âè∑ %>
            <div class="flex-shrink-0 w-12 text-center">
              <span class="text-3xl font-black <%= rank <= 3 ? 'text-orange-500' : 'text-gray-300' %>">
                <%= rank %>
              </span>
            </div>

            <%# „Çµ„É†„Éç„Ç§„É´ %>
            <%= link_to post_path(post), class: "flex-shrink-0" do %>
              <div class="rounded-lg overflow-hidden bg-gray-100" style="width: 128px; height: 72px;">
                <%= image_tag post.youtube_thumbnail_url(size: :mqdefault),
                      alt: post.youtube_title,
                      class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",
                      loading: "lazy" %>
              </div>
            <% end %>

            <%# „Çø„Ç§„Éà„É´„Éª„ÉÅ„É£„É≥„Éç„É´ %>
            <div class="flex-1 min-w-0">
              <%= link_to post_path(post), class: "block" do %>
                <h3 class="text-sm font-medium text-gray-900 group-hover:text-orange-600 transition-colors line-clamp-2">
                  <%= post.youtube_title %>
                </h3>
              <% end %>
              <p class="text-xs text-gray-500 mt-1 truncate"><%= post.youtube_channel_name %></p>
            </div>

            <%# „Ç¢„ÇØ„Ç∑„Éß„É≥Êï∞ %>
            <div class="flex-shrink-0 text-right">
              <span class="text-sm font-bold text-orange-500"><%= post.post_entries.count %></span>
              <span class="text-xs text-gray-400">‰ª∂</span>
            </div>
          </div>
        <% end %>
      </div>

      <%# „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ %>
      <% if @posts.respond_to?(:total_pages) && @posts.total_pages > 1 %>
        <div class="mt-8 flex justify-center">
          <%= paginate @posts %>
        </div>
      <% end %>
    <% else %>
      <div class="py-16 text-center">
        <span class="text-5xl block mb-4">üèÜ</span>
        <p class="text-gray-700 font-medium">„É©„É≥„Ç≠„É≥„Ç∞„ÅÆÊäïÁ®ø„ÅØ„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</p>
      </div>
    <% end %>
  </div>
</div>
