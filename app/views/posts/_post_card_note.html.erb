<%#
  app/views/posts/_post_card_note.html.erb
  ==========================================
  投稿カード（ノートスタイル）
  ==========================================

  【このパーシャルの役割】
  投稿一覧で表示される各動画のカード。
  YouTubeスタイルの縦型カードデザイン。

  【パラメータ】
  post: Postオブジェクト

  【カード構成】
  1. サムネイル画像（16:9比率）
  2. タイトル（2行で切り詰め）
  3. チャンネル情報（アイコン + 名前）
  4. アクション数

  【YouTubeサムネイルサイズ】
  mqdefault = 320x180px（中品質）

  【loading="lazy"】
  画像の遅延読み込み。スクロールして見える位置まで
  来てから画像を読み込む。パフォーマンス最適化。

  【line-clamp-2】
  Tailwind CSSのクラス。テキストを2行で切り詰めて
  「...」を表示する。
%>

<article class="group">
  <%# サムネイル（16:9, 小さい角丸） %>
  <%= link_to post_path(post), class: "block" do %>
    <div class="aspect-video rounded overflow-hidden bg-gray-100">
      <%= image_tag post.youtube_thumbnail_url(size: :mqdefault),
            alt: post.youtube_title || post.action_plan,
            class: "w-full h-full object-cover",
            loading: "lazy" %>
    </div>
  <% end %>

  <%# コンテンツ %>
  <div class="pt-2">
    <%# タイトル（13px, 太字, 2行） %>
    <%= link_to post_path(post), class: "block hover:underline" do %>
      <h3 class="text-[13px] font-bold text-gray-900 leading-tight line-clamp-2">
        <%= post.youtube_title.presence || post.action_plan %>
      </h3>
    <% end %>

    <%# チャンネル情報 %>
    <% if post.youtube_channel_name.present? %>
      <div class="mt-1.5 flex items-center gap-1.5">
        <% if post.youtube_channel_thumbnail_url.present? %>
          <%= image_tag post.youtube_channel_thumbnail_url,
                alt: post.youtube_channel_name,
                class: "w-4 h-4 rounded-full object-cover",
                loading: "lazy" %>
        <% end %>
        <span class="text-[11px] text-gray-500 truncate"><%= post.youtube_channel_name %></span>
      </div>
    <% end %>

    <%# アクション数 %>
    <div class="mt-1">
      <span class="text-[11px] text-gray-400"><%= post.post_entries.count %>件のアクション</span>
    </div>
  </div>
</article>
