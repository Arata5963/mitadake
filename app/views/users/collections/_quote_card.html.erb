<%#
  app/views/users/collections/_quote_card.html.erb
  ==========================================
  達成コレクション: 名言カードデザイン
  ==========================================

  【このパーシャルの役割】
  達成したアクションプランを「名言カード」風に表示。
  動画を背景に、学びが格言のように浮かび上がるデザイン。

  【パラメータ】
  entry: 達成済みのPostEntryオブジェクト

  【デザイン要素】
  - 背景画像（動画サムネイル）
  - オーバーレイ（暗く）
  - 大きな引用符（"）
  - アクションプラン（blockquote）
  - 動画タイトル（出典として）
  - 達成日

  【画像フォールバック】
  maxresdefault.jpg がなければ hqdefault.jpg を使用
  （onerror属性で切り替え）

  【CSSクラス】
  .quote-card__* で定義
%>
<% post = entry.post %>

<article class="quote-card">
  <%# 背景画像（動画サムネイル） %>
  <div class="quote-card__background">
    <%= image_tag "https://i.ytimg.com/vi/#{post.youtube_video_id}/maxresdefault.jpg",
          alt: "",
          loading: "lazy",
          onerror: "this.src='https://i.ytimg.com/vi/#{post.youtube_video_id}/hqdefault.jpg'" %>
    <div class="quote-card__overlay"></div>
  </div>

  <%# コンテンツ %>
  <div class="quote-card__content">
    <%# 引用符 %>
    <div class="quote-card__mark">"</div>

    <%# アクションプラン（名言として） %>
    <blockquote class="quote-card__text">
      <%= entry.content %>
    </blockquote>

    <%# フッター %>
    <footer class="quote-card__footer">
      <div class="quote-card__source">
        <span class="quote-card__video-title"><%= truncate(post.youtube_title, length: 35) %></span>
      </div>
      <div class="quote-card__achieved">
        <span class="quote-card__achieved-label">達成</span>
        <time class="quote-card__achieved-date"><%= entry.achieved_at.strftime("%Y.%-m.%-d") %></time>
      </div>
    </footer>
  </div>
</article>
