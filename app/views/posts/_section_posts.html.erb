<%# app/views/posts/_section_posts.html.erb %>
<%# 投稿セクション（横スクロール） %>
<%# locals: title, posts, link_path %>

<section class="mb-8">
  <%# セクションヘッダー %>
  <div class="flex items-center justify-between mb-4">
    <%= link_to link_path, class: "group flex items-center gap-2" do %>
      <h2 class="text-lg font-bold text-gray-900 group-hover:text-orange-600 transition-colors"><%= title %></h2>
      <svg class="w-5 h-5 text-gray-400 group-hover:text-orange-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    <% end %>
  </div>

  <%# 横スクロールコンテナ（overflow-hiddenでクリップ） %>
  <div class="relative overflow-hidden" data-controller="horizontal-scroll">
    <%# 左スクロールボタン %>
    <button type="button"
            data-horizontal-scroll-target="leftBtn"
            data-action="click->horizontal-scroll#scrollLeft"
            class="hidden absolute z-10 w-10 h-10 bg-white rounded-full shadow-lg items-center justify-center hover:bg-gray-50 transition-colors border border-gray-200"
            style="left: 8px; top: 56px; transform: translateY(-50%);">
      <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
    </button>

    <%# 投稿リスト %>
    <div data-horizontal-scroll-target="container"
         data-action="scroll->horizontal-scroll#onScroll"
         class="flex gap-4 overflow-x-auto scrollbar-hide pb-2 pr-12"
         style="scroll-behavior: smooth; -ms-overflow-style: none; scrollbar-width: none;">
      <% posts.each do |post| %>
        <%= render 'posts/post_card_horizontal', post: post %>
      <% end %>
    </div>

    <%# 右スクロールボタン（常に表示してクリック動作を確認） %>
    <button type="button"
            data-horizontal-scroll-target="rightBtn"
            data-action="click->horizontal-scroll#scrollRight"
            class="flex absolute z-10 w-10 h-10 bg-white rounded-full shadow-lg items-center justify-center hover:bg-gray-50 transition-colors border border-gray-200 cursor-pointer"
            style="right: 8px; top: 56px; transform: translateY(-50%);">
      <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    </button>
  </div>
</section>

<style>
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>
