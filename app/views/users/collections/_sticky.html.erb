<%#
  app/views/users/collections/_sticky.html.erb
  ==========================================
  達成コレクション: 付箋メモデザイン
  ==========================================

  【このパーシャルの役割】
  達成したアクションプランを「付箋メモ」風に表示。
  動画サムネイルに学びの付箋が貼ってあるようなデザイン。

  【パラメータ】
  entry: 達成済みのPostEntryオブジェクト

  【デザイン要素】
  - 動画サムネイル
  - 動画タイトル
  - カラフルな付箋メモ
  - チェックマーク（✓）
  - 達成日（短い形式）

  【付箋の色】
  entry.id に基づいてランダムに選択。
  黄色、オレンジ、緑、青、紫、ピンクの6色。

  【--sticky-color】
  CSS変数で付箋の色を指定。
  スタイルシートで var(--sticky-color) として使用。

  【CSSクラス】
  .sticky-card__* で定義
%>
<% post = entry.post %>
<% sticky_colors = ['#fef08a', '#fed7aa', '#bbf7d0', '#bfdbfe', '#ddd6fe', '#fbcfe8'] %>
<% sticky_color = sticky_colors[entry.id % sticky_colors.length] %>

<article class="sticky-card">
  <%# 動画サムネイル %>
  <div class="sticky-card__video">
    <div class="sticky-card__thumbnail">
      <%= image_tag "https://i.ytimg.com/vi/#{post.youtube_video_id}/mqdefault.jpg",
            alt: post.youtube_title,
            loading: "lazy" %>
    </div>
    <p class="sticky-card__title"><%= truncate(post.youtube_title, length: 35) %></p>
  </div>

  <%# 付箋メモ %>
  <div class="sticky-card__note" style="--sticky-color: <%= sticky_color %>;">
    <div class="sticky-card__note-content">
      <p class="sticky-card__note-text"><%= entry.content %></p>
      <div class="sticky-card__note-footer">
        <span class="sticky-card__note-check">✓</span>
        <span class="sticky-card__note-date"><%= entry.achieved_at.strftime("%-m/%-d") %></span>
      </div>
    </div>
    <div class="sticky-card__note-shadow"></div>
  </div>
</article>
