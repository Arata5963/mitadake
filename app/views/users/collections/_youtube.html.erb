<%# 達成コレクション - グリッドレイアウト用 %>
<% post = entry.post %>
<% user = entry.user %>
<%# サムネイル: 達成記録画像 > カスタム画像 > YouTubeサムネイル %>
<% display_thumbnail = entry.signed_result_image_url || entry.signed_thumbnail_url || "https://i.ytimg.com/vi/#{post.youtube_video_id}/mqdefault.jpg" %>

<article class="group"
         data-controller="achievement-card"
         data-achievement-card-entry-id-value="<%= entry.id %>"
         data-achievement-card-post-id-value="<%= post.id %>"
         data-achievement-card-show-url-value="<%= show_achievement_post_post_entry_path(post, entry) %>"
         data-achievement-card-mode-value="display">
  <div class="rounded-lg overflow-hidden bg-gray-100 aspect-video relative cursor-pointer"
       data-action="click->achievement-card#open">
    <%= image_tag display_thumbnail,
          alt: entry.content,
          class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",
          loading: "lazy" %>
  </div>
  <div class="pt-2">
    <h3 class="text-sm font-medium text-gray-900 group-hover:text-gray-700 transition-colors line-clamp-2 cursor-pointer"
        data-action="click->achievement-card#open">
      <%= entry.content %>
    </h3>
    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 8px;">
      <%= link_to user_profile_path(user), style: "display: flex; align-items: center; gap: 6px; text-decoration: none;" do %>
        <%= render "shared/avatar", user: user, size: :sm, lazy: true %>
        <span style="font-size: 12px; color: #888;"><%= user.name.presence || "名無しさん" %></span>
      <% end %>
      <%= render 'post_entries/like_button', post_entry: entry %>
    </div>
  </div>
</article>
